---
layout: post
title: How To Save Struts Messages After a Redirect
date: 2012-12-18 10:34:41.000000000 -08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags:
- actionerror
- actionmessage
- errors
- How To
- messages
- Programming
- redirect
- save
- session
- Struts
meta:
  _edit_last: '1'
  _jetpack_related_posts_cache: a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1543642875;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:695;}i:1;a:1:{s:2:"id";i:1014;}i:2;a:1:{s:2:"id";i:961;}}}}
author:
  login: Philihp
  email: philihp@gmail.com
  display_name: Philihp
  first_name: ''
  last_name: ''
---
<p>If you've got an Action in Struts 1 that leaves an error or message for the view, it does it somewhere in the class like this:</p>
<pre lang="java">ActionMessages messages = getMessages(request);
messages.add(ActionMessages.GLOBAL_MESSAGE, new ActionMessage("message.detail", "Normality has been restored."));
saveMessages(request, messages);</pre>
<p>However if your Action later selects an ActionForward that redirects (possibly unbeknownst to the Action, since that is configured elsewhere), the Controller will redirect the browser to that new location and Struts will see that redirected call as an entirely new request, having lost anything in the request attributes (such as the message you just saved).</p>
<p>There are some <a href="http://struts.1045723.n5.nabble.com/Showing-messages-after-a-redirect-td3481980.html">other</a> ways to do it, but here's a really simple way to do it:</p>
<pre lang="java">saveMessages(request.getSession(), messages);</pre>
<p>Once they're displayed in the view once they will automatically be removed from the session. In this fashion, it behaves like a <a href="http://mkblog.exadel.com/2010/07/learning-jsf2-using-flash-scope/">Flash</a> scoped variable in JSF, except you can be sure it's displayed even if the next request fails, which is probably a good thing.</p>
