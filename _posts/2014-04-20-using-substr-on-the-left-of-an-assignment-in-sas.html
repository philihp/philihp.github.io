---
layout: post
title: Using SUBSTR on the left of an assignment in SAS
date: 2014-04-20 01:46:57.000000000 -07:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags:
- perl
- Programming
- SAS
- substr
meta:
  _edit_last: '1'
  _jetpack_related_posts_cache: a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1543728592;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:430;}i:1;a:1:{s:2:"id";i:507;}i:2;a:1:{s:2:"id";i:1069;}}}}
author:
  login: Philihp
  email: philihp@gmail.com
  display_name: Philihp
  first_name: ''
  last_name: ''
---
<p>This is a pretty cool feature, and as far as I know it's unique to SAS and Perl. <a href="http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000212267.htm">In SAS, you can have a substr to the left of an assignment</a>.</p>
<pre lang="SAS">stringDate='29MAR1984';
substr(stringDate,3,3)='FEB';</pre>
<p>This avoids potentially awkward situations like this:</p>
<pre lang="SAS">stringDate='29MAR1984';
stringDate=substr(stringDate,1,2)||'FEB'||substr(stringDate,6,4);</pre>
<p>The bounds don't have to be static. Lets suppose we have a dataset with 1 row per letter, and we want to combine those letters into a word.</p>
<pre lang="sas">data have;
    input letter $1.;
    datalines;
h
e
l
l
o
;
run;</pre>
<p>My initial thought was to just retain and append each letter:</p>
<pre lang="SAS">data want;
  length word $200;
  retain word;
  set have nobs=nobs;
  call cats(word,letter);
  if(nobs=_n_) then output;
run;</pre>
<p>However this breaks if one of the letters is a space, and SAS treats the space as null, so appending a space has no effect on the string. Instead of appending, just stick the letter where it's supposed to be.</p>
<pre lang="SAS">data want;
  length word $200;
  retain word ' ';
  set have nobs=nobs;
  substr(word,_n_,1) = letter;
  if(_n_==nobs) then output;
run;</pre>
